<%# ----------- 割振モード ----------- %>

<% if @event.mode == 'share' %>
  <h1>割振</h1>
  <p>金額:<%= @event.gamble.total_amount %>円</p>
  <% @joined_users.each do |joined_user| %>
    <div><%= image_tag joined_user.picture_url, class: 'rounded-circle', size: '50x50' %></div>
    <div><%= joined_user.name %></div>
  <% end %>
  <% if @event.created_by?(current_user) %>
    <div>
      <%= link_to 'スタート', mode_event_rooms_path(@event), {method: :post, class: "btn btn-primary #{ 'disabled' if @event.counts > 0 }", data: { confirm: '始めますか？' }} %>
    </div>
  <% end %>
  <% if @event.counts > 0 %>
    <% @joined_users.each do |joined_user| %>
      <div><%= image_tag joined_user.picture_url, class: 'rounded-circle', size: '50x50' %><%= @event.gamble.total_amount %></div>
    <% end %>
  <% end %>

<%# ----------- 平等モード ----------- %>

<% elsif @event.mode == 'equal' %>
  <div class="container justify-content-center text-center">
    <div class="row mt-5 mb-3 h2">
      <div class="col-6">
        金額
      </div>
      <div class="col-6">
        <%= @event.gamble.total_amount %>円
      </div>

      <div class="col-6 my-3">
        支払人数
      </div>
      <div class="col-6 my-3">
        <%= @event.gamble.people_number %>人
      </div>
    </div>

    <div class="row justify-content-center mb-3">
      <div class="col-9">
        <div class="row justify-content-center">
          <% @joined_users.each do |joined_user| %>
            <div class="col-3 my-2">
              <div><%= image_tag 'warigam_header.png', class: 'rounded-circle', size: '50x50' %></div>
              <%# <div><%= image_tag joined_user.picture_url, class: 'rounded-circle', size: '50x50' %1></div> %>
              <div><%= joined_user.name.truncate(4, omission: '') %></div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <% if @event.created_by?(current_user) %>
      <div class="mb-3">
        <%= link_to 'スタート', equal_event_rooms_path(@event), {method: :post, class: "btn btn-primary #{ 'disabled' if @event.counts > 0 }", data: { confirm: '始めますか？' }} %>
      </div>
    <% end %>
    <% if @event.counts > 0 %>
      <div class="row justify-content-center mb-3">
        <div class="col-9">
          <div class="row justify-content-center">
            <% @event.results.each do |result_user| %>
              <div class="col-3 my-2">
                <div><%= image_tag 'warigam_header.png', class: 'rounded-circle', size: '50x50' %></div>
                <%# <div><%= image_tag selected_user.picture_url, class: 'rounded-circle', size: '50x50' %1></div> %>
                <div><%= result_user.name.truncate(4, omission: '') %></div>
              </div>
            <% end %>
          </div>
        </div>

        <div class="row justify-content-center h2 my-5">
          <div class="col-5">
            1人あたり
          </div>
          <div class="col-5">
            <%= @equal_amount %>円
          </div>
        </div>
      </div>

      <div class="mt-4">
        <%= link_to 'イベント一覧', events_path %>
      </div>
    <% end %>
  </div>

<%# ----------- 単位モード ----------- %>


<% elsif @event.mode == 'unit' %>
  <div class="container justify-content-center text-center">
    <div class="row mt-5 mb-3 h2">
      <div class="col-6">
        金額
      </div>
      <div class="col-6">
        <%= @event.gamble.total_amount %>円
      </div>
    </div>
    <div class="row justify-content-center mb-3">
      <div class="col-9">
        <div class="row justify-content-center">
          <% @joined_users.each do |joined_user| %>
            <div class="col-3 my-2">
              <div><%= image_tag 'warigam_header.png', class: 'rounded-circle', size: '50x50' %></div>
              <%# <div><%= image_tag joined_user.picture_url, class: 'rounded-circle', size: '50x50' %1></div> %>
              <div><%= joined_user.name.truncate(4, omission: '') %></div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <% if @event.created_by?(current_user) %>
      <div class="mb-3">
        <%= link_to 'スタート', unit_event_rooms_path(@event), {method: :post, class: "btn btn-primary #{ 'disabled' if @event.counts > 0 }", data: { confirm: '始めますか？' }} %>
      </div>
    <% end %>
    <% if @event.counts > 0 %>
      <div class="row mt-4">
        <div class="col-6">
          <% @event.results.each do |result_user| %>
              <div><%= image_tag 'warigam_header.png', class: 'rounded-circle', size: '50x50' %></div>
              <%# <div><%= image_tag selected_user.picture_url, class: 'rounded-circle', size: '50x50' %1></div> %>
              <div class="mb-4"><%= result_user.name.truncate(4, omission: '') %></div>
          <% end %>
        </div>
        <div class="col-6 mt-2">
          <% @unit.each do |unit|%>
            <div class="mt-4 mb-5 pb-3 h2">
              <div><%= unit %>円</div>
            </div>
          <% end %>
        </div>

        <div class="mt-4">
          <%= link_to 'イベント一覧', events_path %>
        </div>
      </div>
    <% end %>
  </div>

<%# ----------- モードなし ----------- %>

<% else %>
  <h1>モードなし</h1>
<% end %>
